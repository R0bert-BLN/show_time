<div id="cart-item-{{ item['ticketType'].id }}"
     class="flex justify-between items-center border-b-2 border-[#ca8f53] w-full px-6 py-4"
     x-data="{
        quantity: {{ item['quantity'] }},
        price: {{ item['ticketType'].price }},
        subtotal: {{ item['ticketType'].price * item['quantity'] }}
     }"
     x-init="$watch('quantity', (value) => {
        subtotal = value * price;
        if (value > 0) {
            $refs.updateForm.requestSubmit();
        } else {
            $refs.removeForm.requestSubmit();
        }
        })">

    <form x-ref="updateForm" action="{{ path('app_cart_update', {'id': item['ticketType'].id}) }}" method="POST" class="hidden">
        <input name="quantity" type="hidden" :value="quantity">
    </form>

    <form x-ref="removeForm" action="{{ path('app_cart_remove', {'id': item['ticketType'].id}) }}" method="POST" class="hidden"></form>

    <div class="flex flex-col">
        <p class="text-[22px] text-[#ca8f53] font-bold">{{ item['ticketType'].festival.name }}</p>
        <p class="text-[18px] text-gray-700 font-semibold">{{ item['ticketType'].name }}</p>
    </div>

    <div class="flex flex-col items-center">
        <div class="flex items-center">
            <button type="button" @click="quantity = quantity - 1" class="px-2 py-1 text-gray-600 cursor-pointer">-</button>
            <span x-text="quantity" class="w-10 text-center border-x text-gray-800 font-semibold"></span>
            <button type="button" @click="quantity++" class="px-2 py-1 text-gray-600 cursor-pointer">+</button>
        </div>

        <p class="mt-1 text-[18px] text-gray-700 font-bold">
            <span x-text="subtotal.toFixed(2)"></span> {{ item['ticketType'].currency }}
        </p>
    </div>
</div>
